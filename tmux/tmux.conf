# ─────────────────────────────────────────────────────────
# TMUX — Tokyo Night Theme + Status Plugins
# ─────────────────────────────────────────────────────────

# 1) Reset keys + foundation
source-file ~/.config/tmux/tmux.reset.conf

# 2) General tmux behavior
set -g base-index 1
setw -g pane-base-index 1
set -g escape-time 0
set -g history-limit 200000
set -g renumber-windows on
set -g detach-on-destroy off
setw -g mode-keys vi
set -g set-clipboard on

# 3) Prefix key (Ctrl+A)
unbind C-b
set -g prefix C-a
bind C-a send-prefix

# 4) Terminal compatibility
set -g default-terminal "screen-256color"
set -g terminal-overrides ",xterm-256color:RGB"

# 5) Status bar refresh
set -g status-interval 1
set -g status-position top

# ─────────────────────────────────────────────────────────
# Tokyo Night Status Colors
# ─────────────────────────────────────────────────────────
set -g status-style "bg=#16161e,fg=#c0caf5"
set -g pane-border-style "fg=#565f89"
set -g pane-active-border-style "fg=#7aa2f7"
set -g message-style "bg=#1a1b26,fg=#7dcfff"
set -g mode-style "bg=#7aa2f7,fg=#1a1b26"

setw -g window-status-style "fg=#565f89,bg=#16161e"
setw -g window-status-current-style "fg=#7aa2f7,bg=#16161e,bold"

# Left side of status
set -g status-left "#[fg=#bb9af7]  #S "

# ─────────────────────────────────────────────────────────
# Plugins
# ─────────────────────────────────────────────────────────
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'

# Status info
set -g @plugin 'tmux-plugins/tmux-battery'
set -g @plugin 'tmux-plugins/tmux-mem-cpu-load'
set -g @plugin 'tmux-plugins/tmux-net-speed'
set -g @plugin 'tmux-plugins/tmux-online-status'
set -g @plugin 'tmux-plugins/tmux-ip-address'

# Git branch
set -g @plugin 'tcd0121/tmux-git'

# Productivity Navigation
set -g @plugin 'sainnhe/tmux-fzf'
set -g @plugin 'wfxr/tmux-fzf-url'
set -g @plugin 'fcsonline/tmux-thumbs'
set -g @plugin 'omerxx/tmux-sessionx'
set -g @plugin 'omerxx/tmux-floax'

# Floax settings
set -g @floax-width '80%'
set -g @floax-height '80%'
set -g @floax-bind 'p'
set -g @floax-border-color '#7aa2f7'
set -g @floax-text-color '#c0caf5'

# Sessionx (project sessions)
set -g @sessionx-bind 'o'
set -g @sessionx-zoxide-mode 'on'
set -g @sessionx-window-height '85%'
set -g @sessionx-window-width '75%'

# Resurrect + Continuum
set -g @continuum-restore 'on'
set -g @resurrect-strategy-nvim 'session'

# Right side status content
set -g status-right \
  "#[fg=#green]#{battery_icon}#{battery_percentage} " \
  "#[fg=#cyan]CPU #{cpu_percentage}%% MEM #{mem_percentage}%% " \
  "#[fg=#blue]↓#{net_speed_down} ↑#{net_speed_up} " \
  "#[fg=#yellow]#{online_status} " \
  "#[fg=#magenta]#{ip_address} " \
  "#[fg=#blue]#(tmux-git display) " \
  "#[fg=#565f89]%H:%M "

# ─────────────────────────────────────────────────────────
# Initialize TPM (MUST be last)
# ─────────────────────────────────────────────────────────
run '~/.tmux/plugins/tpm/tpm'

