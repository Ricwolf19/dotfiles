##################################################
# GLOBAL TMUX SETTINGS
##################################################

# — Use Ctrl + Space as prefix
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# — True color & terminal
set -g default-terminal "screen-256color"
set -as terminal-overrides ",xterm-256color:RGB"

# — Vi mode & mouse
setw -g mode-keys vi
set -g mouse on

# — History & behavior
set -g history-limit 1000000
set -g renumber-windows on
set -g set-clipboard on
set -sg escape-time 0

# — Pane border colors (Tokyo Night)
set -g pane-border-style fg=#414868
set -g pane-active-border-style fg=#7aa2f7

set -g status on
set -g status-position top
set -g status-interval 3
set -g status-style bg=#1a1b26,fg=#a9b1d6

##################################################
# PLUGIN CONFIGURATION (TPM)
##################################################

set -g @plugin 'tmux-plugins/tpm'                  # plugin manager
set -g @plugin 'tmux-plugins/tmux-sensible'        # sensible defaults
set -g @plugin 'tmux-plugins/tmux-yank'            # system clipboard
set -g @plugin 'tmux-plugins/tmux-prefix-highlight' # prefix indicator
set -g @plugin 'tmux-plugins/tmux-battery'         # battery status
set -g @plugin 'tmux-plugins/tmux-cpu'             # CPU/RAM info
set -g @plugin 'tmux-plugins/tmux-continuum'       # auto save & restore

set -g @plugin 'sainnhe/tmux-fzf'                  # fuzzy search windows
set -g @plugin 'wfxr/tmux-fzf-url'                 # fuzzy open URLs
set -g @plugin 'omerxx/tmux-sessionx'              # session manager
set -g @plugin 'omerxx/tmux-floax'                 # floating terminals
set -g @plugin 'fabioluciano/tmux-powerkit'        # status components

##################################################
# CONTINUUM (AUTO SAVE/RESTORE)
##################################################

set -g @continuum-save-interval '15'
set -g @continuum-restore 'on'

##################################################
# POWERKIT TOKYO NIGHT THEME
##################################################

set -g @powerkit_theme 'tokyo-night'
set -g @powerkit_theme_variant 'night'
set -g @powerkit_plugins 'session,windows,git,cpu,mem,battery,datetime'

##################################################
# FZF URL CONFIG
##################################################

set -g @fzf-url-fzf-options '-p 60%,30% --prompt=" " --border-label="Open URL"'
set -g @fzf-url-history-limit '2000'

##################################################
# SESSIONX / FLOAX SETTINGS
##################################################

set -g @floax-width '80%'
set -g @floax-height '80%'
set -g @floax-bind 'p'
set -g @sessionx-bind 'o'
set -g @sessionx-zoxide-mode 'on'
set -g @sessionx-custom-paths-subdirectories 'false'

##################################################
# KEYBINDINGS
##################################################

# Reload config
bind r source-file ~/.tmux.conf \; display-message "tmux config reloaded!"

# Splits
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind z resize-pane -Z

# Pane navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# Fast pane resizing
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# Windows
bind c new-window -c "#{pane_current_path}"
bind , command-prompt -p "Rename window:" "rename-window %%"
bind w choose-window

##################################################
# INITIALIZE TPM
##################################################

run "~/.tmux/plugins/tpm/tpm"

