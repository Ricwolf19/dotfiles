##################################################
# GLOBAL TMUX SETTINGS
##################################################

# — Use Ctrl + Space as prefix
unbind C-b
set -g prefix C-Space
bind C-Space send-prefix

# — Terminal	true-color
set -g default-terminal "screen-256color"
set -as terminal-overrides ",xterm-256color:RGB"

set -g mouse on
setw -g mode-keys vi
set -g history-limit 1000000
set -g renumber-windows on
set -g set-clipboard on
set -sg escape-time 0

# Pane border colors
set -g pane-border-style fg=#4B5263
set -g pane-active-border-style fg=#7AA2F7

# Status bar style
set -g status on
set -g status-position top
set -g status-interval 3
set -g status-style bg=#1A1B26,fg=#A9B1D6

##################################################
# FIX RESURRECT / POWERKIT CONFLICT
##################################################

# Remap tmux-resurrect restore from prefix + C-r → prefix + C-s
unbind C-r
set -g @resurrect-restore 'C-s'

# (Optional) If you wanted to disable PowerKit theme selector instead:
# set -g @powerkit_plugin_core_theme_selector ""

##################################################
# PLUGINS (TPM)
##################################################

set -g @plugin 'tmux-plugins/tpm'

set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'tmux-plugins/tmux-resurrect'
set -g @plugin 'tmux-plugins/tmux-continuum'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @plugin 'tmux-plugins/tmux-battery'
set -g @plugin 'tmux-plugins/tmux-cpu'

set -g @plugin 'sainnhe/tmux-fzf'
set -g @plugin 'wfxr/tmux-fzf-url'
set -g @plugin 'omerxx/tmux-sessionx'
set -g @plugin 'omerxx/tmux-floax'

set -g @plugin 'fabioluciano/tmux-powerkit'

##################################################
# POWERKIT TOKYO NIGHT THEME
##################################################

set -g @powerkit_theme 'tokyo-night'
set -g @powerkit_theme_variant 'night'
set -g @powerkit_plugins 'session,windows,git,cpu,mem,battery,datetime'

##################################################
# FZF URL OPTIONS
##################################################

set -g @fzf-url-fzf-options '-p 60%,30% --prompt="   " --border-label="Open URL"'
set -g @fzf-url-history-limit '2000'

##################################################
# SESSIONX / FLOAX POPUPS
##################################################

set -g @floax-width '80%'
set -g @floax-height '80%'
set -g @floax-bind 'p'
set -g @floax-change-path 'true'

set -g @sessionx-bind 'o'
set -g @sessionx-zoxide-mode 'on'
set -g @sessionx-bind-zo-new-window 'ctrl-y'
set -g @sessionx-auto-accept 'off'
set -g @sessionx-custom-paths-subdirectories 'false'
set -g @sessionx-filter-current 'false'

##################################################
# KEYBINDINGS
##################################################

# reload config
bind r source-file ~/.tmux.conf \; display-message "Reloaded tmux config!"

# splits
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind z resize-pane -Z

# navigation
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# fast pane resizing
bind -r H resize-pane -L 5
bind -r J resize-pane -D 5
bind -r K resize-pane -U 5
bind -r L resize-pane -R 5

# window management
bind c new-window -c "#{pane_current_path}"
bind , command-prompt -p "Rename window:" "rename-window %%"
bind w choose-window

##################################################
# INITIALIZE TPM
##################################################
run '~/.tmux/plugins/tpm/tpm'

